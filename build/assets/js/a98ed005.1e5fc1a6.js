"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_textbook=self.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[801],{2925:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>r,contentTitle:()=>s,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"modules/m3-isaac/m3-nav2-planning","title":"Lesson 3: Nav2 Path Planning for Humanoids","description":"Implement autonomous navigation for bipedal humanoid robots using Nav2. Global planning, local planning, and obstacle avoidance.","source":"@site/docs/modules/m3-isaac/m3-nav2-planning.mdx","sourceDirName":"modules/m3-isaac","slug":"/modules/m3-isaac/m3-nav2-planning","permalink":"/docs/modules/m3-isaac/m3-nav2-planning","draft":false,"unlisted":false,"editUrl":"https://github.com/Danishhshahid/Physical-AI-Humanoid-Robotics-Book/tree/main/website/docs/modules/m3-isaac/m3-nav2-planning.mdx","tags":[],"version":"current","frontMatter":{"id":"m3-nav2-planning","title":"Lesson 3: Nav2 Path Planning for Humanoids","sidebar_label":"L3: Nav2 Planning","description":"Implement autonomous navigation for bipedal humanoid robots using Nav2. Global planning, local planning, and obstacle avoidance."},"sidebar":"tutorialSidebar","previous":{"title":"L2: Isaac ROS","permalink":"/docs/modules/m3-isaac/m3-isaac-ros"},"next":{"title":"M4: Overview","permalink":"/docs/modules/m4-vla/m4-overview"}}');var l=a(4848),i=a(8453);const t={id:"m3-nav2-planning",title:"Lesson 3: Nav2 Path Planning for Humanoids",sidebar_label:"L3: Nav2 Planning",description:"Implement autonomous navigation for bipedal humanoid robots using Nav2. Global planning, local planning, and obstacle avoidance."},s=void 0,r={},c=[{value:"What is Nav2?",id:"what-is-nav2",level:2},{value:"Nav2 Architecture",id:"nav2-architecture",level:2},{value:"Installation",id:"installation",level:2},{value:"Configure Nav2 for Humanoid",id:"configure-nav2-for-humanoid",level:2},{value:"Launch Nav2",id:"launch-nav2",level:2},{value:"Send Navigation Goals",id:"send-navigation-goals",level:2},{value:"Customize for Bipedal Locomotion",id:"customize-for-bipedal-locomotion",level:2},{value:"Module 3 Complete!",id:"module-3-complete",level:2},{value:"Next: Module 4",id:"next-module-4",level:2}];function _(n){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"what-is-nav2",children:"What is Nav2?"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Nav2"})," (Navigation 2) is ROS 2's navigation framework. It provides:"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\ud83d\uddfa\ufe0f ",(0,l.jsx)(e.strong,{children:"Global Planning"}),": Long-term path from start to goal (RRT*, A*)"]}),"\n",(0,l.jsxs)(e.li,{children:["\ud83d\ude97 ",(0,l.jsx)(e.strong,{children:"Local Planning"}),": Short-term obstacle avoidance (Dynamic Window Approach)"]}),"\n",(0,l.jsxs)(e.li,{children:["\ud83d\udcca ",(0,l.jsx)(e.strong,{children:"Cost Maps"}),": Occupancy grids and layers"]}),"\n",(0,l.jsxs)(e.li,{children:["\ud83c\udfaf ",(0,l.jsx)(e.strong,{children:"Goal Management"}),": Handle multiple goals and preemption"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"nav2-architecture",children:"Nav2 Architecture"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"SLAM/Localization (pose)\n        \u2193\nGlobal Costmap (static + dynamic)\n        \u2193\nGlobal Planner (RRT*, A*) \u2192 Global Path\n        \u2193\nLocal Costmap (sensors)\n        \u2193\nLocal Planner (DWA) \u2192 Velocity Commands\n        \u2193\n\ud83e\udd16 Robot Actuators\n"})}),"\n",(0,l.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo apt-get install ros-humble-navigation2 \\\n                     ros-humble-nav2-bringup \\\n                     ros-humble-slam-toolbox\n"})}),"\n",(0,l.jsx)(e.h2,{id:"configure-nav2-for-humanoid",children:"Configure Nav2 for Humanoid"}),"\n",(0,l.jsxs)(e.p,{children:["Create ",(0,l.jsx)(e.code,{children:"nav2_params.yaml"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'bt_navigator:\n  ros__parameters:\n    use_sim_time: True\n    global_frame: map\n    robot_base_frame: base_link\n    odom_topic: /odometry\n    bt_loop_duration: 10\n    default_bt_xml_filename: "navigate_w_replanning_and_recovery.xml"\n    plugin_lib_names:\n      - nav2_compute_path_to_pose_action_bt_node\n      - nav2_follow_path_action_bt_node\n      - nav2_spin_action_bt_node\n      - nav2_wait_action_bt_node\n\nglobal_costmap:\n  global_costmap:\n    ros__parameters:\n      update_frequency: 1.0\n      publish_frequency: 1.0\n      global_frame: map\n      robot_base_frame: base_link\n      use_sim_time: True\n      rolling_window: false\n      width: 50\n      height: 50\n      resolution: 0.05\n      origin_x: -25.0\n      origin_y: -25.0\n      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]\n\n      static_layer:\n        plugin: nav2_costmap_2d::StaticLayer\n        map_subscribe_transient_local: True\n\n      obstacle_layer:\n        plugin: nav2_costmap_2d::ObstacleLayer\n        enabled: True\n        observation_sources: scan\n        scan:\n          topic: /scan\n          max_obstacle_height: 2.0\n          clearing: True\n          marking: True\n          data_type: "LaserScan"\n\n      inflation_layer:\n        plugin: nav2_costmap_2d::InflationLayer\n        cost_scaling_factor: 3.0\n        inflation_radius: 0.55\n\nlocal_costmap:\n  local_costmap:\n    ros__parameters:\n      update_frequency: 5.0\n      publish_frequency: 2.0\n      global_frame: map\n      robot_base_frame: base_link\n      use_sim_time: True\n      rolling_window: true\n      width: 25\n      height: 25\n      resolution: 0.05\n      robot_radius: 0.2\n      plugins: ["obstacle_layer", "inflation_layer"]\n\n      obstacle_layer:\n        plugin: nav2_costmap_2d::ObstacleLayer\n        enabled: True\n        observation_sources: scan\n        scan:\n          topic: /scan\n          max_obstacle_height: 2.0\n          clearing: True\n          marking: True\n          data_type: "LaserScan"\n\n      inflation_layer:\n        plugin: nav2_costmap_2d::InflationLayer\n        cost_scaling_factor: 3.0\n        inflation_radius: 0.25\n\nplanner_server:\n  ros__parameters:\n    expected_planner_frequency: 20.0\n    use_sim_time: True\n    planner_plugins: ["GridBased"]\n    GridBased:\n      plugin: nav2_navfn_planner::NavfnPlanner\n      tolerance: 0.5\n      use_astar: false\n      allow_unknown: true\n\ncontroller_server:\n  ros__parameters:\n    update_frequency: 10.0\n    use_sim_time: True\n    controller_frequency: 20.0\n    min_x_velocity_threshold: 0.001\n    min_y_velocity_threshold: 0.5\n    min_theta_velocity_threshold: 0.001\n    failure_tolerance: 0.3\n    progress_checker_plugin: "progress_checker"\n    goal_checker_plugins: ["general_goal_checker"]\n    controller_plugins: ["FollowPath"]\n\n    progress_checker:\n      plugin: nav2_controller::SimpleProgressChecker\n      required_movement_radius: 0.5\n      movement_time_allowance: 10.0\n\n    general_goal_checker:\n      stateful: True\n      plugin: nav2_controller::SimpleGoalChecker\n      xy_goal_tolerance: 0.25\n      yaw_goal_tolerance: 0.25\n\n    FollowPath:\n      plugin: nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController\n      desired_linear_vel: 0.5\n      lookahead_dist: 0.6\n      min_lookahead_dist: 0.3\n      max_lookahead_dist: 0.9\n      lookahead_time: 1.5\n      rotate_to_heading_angular_vel: 1.8\n      transform_tolerance: 0.1\n      use_velocity_scaled_lookahead_dist: false\n      min_approach_linear_velocity: 0.05\n      approach_velocity_scaling_dist: 0.6\n      regulated_linear_scaling_min_radius: 0.9\n      regulated_linear_scaling_max_radius: 0.55\n      use_cost_regulated_linear_velocity_scaling: true\n      cost_scaling_dist: 0.6\n      cost_scaling_gain: 1.0\n      inflation_cost_scaling_factor: 3.0\n      collision_margin: 0.10\n      inflation_radius: 0.55\n      allow_reversing: false\n      rehabilitation_indicator_window: 0.0\n'})}),"\n",(0,l.jsx)(e.h2,{id:"launch-nav2",children:"Launch Nav2"}),"\n",(0,l.jsxs)(e.p,{children:["Create ",(0,l.jsx)(e.code,{children:"bringup_launch.py"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node, PushRosNamespace\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\n\ndef generate_launch_description():\n    # SLAM/Localization\n    slam = Node(\n        package='slam_toolbox',\n        executable='async_slam_toolbox_node',\n        parameters=[{'use_sim_time': True}]\n    )\n\n    # Nav2 bringup\n    nav2 = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource('nav2_bringup_launch.py'),\n        launch_arguments={\n            'namespace': '',\n            'use_namespace': 'false',\n            'slam': 'true',\n            'map': '',\n            'use_sim_time': 'true',\n            'params_file': 'nav2_params.yaml',\n            'autostart': 'true'\n        }.items()\n    )\n\n    return LaunchDescription([slam, nav2])\n"})}),"\n",(0,l.jsx)(e.p,{children:"Run it:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_package bringup_launch.py\n"})}),"\n",(0,l.jsx)(e.h2,{id:"send-navigation-goals",children:"Send Navigation Goals"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'from nav2_simple_commander.robot_navigator import BasicNavigator\nfrom geometry_msgs.msg import PoseStamped\n\nclass HumanoidNavigator:\n    def __init__(self):\n        self.nav = BasicNavigator()\n\n    def navigate_to_goal(self, x, y, theta):\n        """Send goal to Nav2."""\n        goal_pose = PoseStamped()\n        goal_pose.header.frame_id = \'map\'\n        goal_pose.header.stamp = self.nav.get_clock().now().to_msg()\n        goal_pose.pose.position.x = x\n        goal_pose.pose.position.y = y\n        goal_pose.pose.orientation.z = theta\n\n        self.nav.goToPose(goal_pose)\n\n    def navigate_multiple_goals(self, goals):\n        """Navigate to multiple goals in sequence."""\n        for x, y, theta in goals:\n            print(f"Navigating to ({x}, {y})")\n            self.navigate_to_goal(x, y, theta)\n\n            # Wait for completion\n            while not self.nav.isTaskComplete():\n                feedback = self.nav.getFeedback()\n                print(f"Distance to goal: {feedback.distance_remaining:.2f} m")\n\n            result = self.nav.getResult()\n            if result:\n                print("Goal reached!")\n            else:\n                print("Failed to reach goal")\n\n# Example usage\nnavigator = HumanoidNavigator()\ngoals = [\n    (2.0, 0.0, 0.0),      # Move 2m forward\n    (2.0, 2.0, 1.57),     # Move right, turn 90\xb0\n    (0.0, 2.0, 3.14),     # Move backward, turn 180\xb0\n]\nnavigator.navigate_multiple_goals(goals)\n'})}),"\n",(0,l.jsx)(e.h2,{id:"customize-for-bipedal-locomotion",children:"Customize for Bipedal Locomotion"}),"\n",(0,l.jsx)(e.p,{children:"Humanoids have different dynamics than wheeled robots:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# In nav2_params.yaml\n\nFollowPath:\n  plugin: nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController\n  # Slower for bipedal stability\n  desired_linear_vel: 0.3  # Was 0.5\n  max_angular_vel: 1.0      # Limit turning speed\n\n  # Larger lookahead for smoother paths\n  lookahead_dist: 1.0       # Was 0.6\n\n  # Allow reversing for complex maneuvers\n  allow_reversing: true\n"})}),"\n",(0,l.jsx)(e.h2,{id:"module-3-complete",children:"Module 3 Complete!"}),"\n",(0,l.jsx)(e.p,{children:"You've built a complete autonomous humanoid with:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2705 GPU-accelerated perception (VSLAM, object detection)"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 Robust path planning (Nav2)"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 Real-time obstacle avoidance"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"next-module-4",children:"Next: Module 4"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"/docs/modules/m4-vla/m4-overview",children:"Module 4: Vision-Language-Action (VLA)"})})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(_,{...n})}):_(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>t,x:()=>s});var o=a(6540);const l={},i=o.createContext(l);function t(n){const e=o.useContext(i);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),o.createElement(i.Provider,{value:e},n.children)}}}]);