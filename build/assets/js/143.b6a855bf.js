/*! For license information please see 143.b6a855bf.js.LICENSE.txt */
"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_textbook=self.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[143],{3143:(e,t,n)=>{function r(e,t,n,o){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}r=function(e,t,n,o){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?s?s(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},r(e,t,n,o)}function o(){var e,t,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,o,s,i){var a=o&&o.prototype instanceof u?o:u,l=Object.create(a.prototype);return r(l,"_invoke",function(n,r,o){var s,i,a,u=0,l=o||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return s=t,i=0,a=e,h.n=n,c}};function f(n,r){for(i=n,a=r,t=0;!d&&u&&!o&&t<l.length;t++){var o,s=l[t],f=h.p,p=s[2];n>3?(o=p===r)&&(a=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=e):s[0]<=f&&((o=n<2&&f<s[1])?(i=0,h.v=r,h.n=s[1]):f<p&&(o=n<3||s[0]>r||r>p)&&(s[4]=n,s[5]=r,h.n=p,i=0))}if(o||n>1)return c;throw d=!0,r}return function(o,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),i=l,a=p;(t=i<2?e:a)||!d;){s||(i?i<3?(i>1&&(h.n=-1),f(i,a)):h.n=a:h.v=a);try{if(u=2,s){if(i||(o="next"),t=s[o]){if(!(t=t.call(s,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,i<2&&(i=0)}else 1===i&&(t=s.return)&&t.call(s),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);s=e}else if((t=(d=h.n<0)?a:n.call(r,h))!==c)break}catch(t){s=e,i=1,a=t}finally{u=1}}return{value:t,done:d}}}(n,s,i),!0),l}var c={};function u(){}function l(){}function d(){}t=Object.getPrototypeOf;var h=[][s]?t(t([][s]())):(r(t={},s,function(){return this}),t),f=d.prototype=u.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=d,r(f,"constructor",d),r(d,"constructor",l),l.displayName="GeneratorFunction",r(d,i,"GeneratorFunction"),r(f),r(f,i,"Generator"),r(f,s,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(o=function(){return{w:a,m:p}})()}function s(e,t,n,r,o,s,i){try{var a=e[s](i),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}n.r(t),n.d(t,{default:()=>l});var i=n(6540);const a={buttonContainer:"buttonContainer_bhW3",floatingButton:"floatingButton_ingx",selectedTextButton:"selectedTextButton_tTT5",slideIn:"slideIn_oKkD",chatWindow:"chatWindow_gkuN",slideUp:"slideUp_h5NH",header:"header_XAMZ",closeButton:"closeButton_zIiJ",messagesContainer:"messagesContainer__1H3",message:"message_JIQK",fadeIn:"fadeIn_XNDe",user:"user_hzV0",assistant:"assistant_pri8",messageContent:"messageContent_AzHs",messageText:"messageText_pI0P",selectedTextContext:"selectedTextContext_NQuU",sources:"sources_wNGj",source:"source_a6ox",loadingSpinner:"loadingSpinner_vVig",bounce:"bounce_VndK",inputArea:"inputArea_ZeQ5",selectedTextIndicator:"selectedTextIndicator_kc_K",inputContainer:"inputContainer_Xfat",input:"input_OZTt",sendButton:"sendButton_WdSO"};const c=function(){if("undefined"==typeof window)return{apiEndpoint:process.env.CHATBOT_API_URL||"http://localhost:8000"};if(window.__CHATBOT_CONFIG__)return window.__CHATBOT_CONFIG__;var e="physical-ai-humanoid-robotics-book-tan.vercel.app"===window.location.hostname||window.location.hostname.includes("vercel.app"),t="https://physical-ai-humanoid-robotics-book-rd2d.onrender.com";return isDevelopment?t="http://localhost:8000":e&&(t="https://physical-ai-humanoid-robotics-book-rd2d.onrender.com"),{apiEndpoint:t}};var u=n(4848);function l(){var e=(0,i.useState)(!1),t=e[0],n=e[1],r=(0,i.useState)([{id:1,type:"assistant",text:"Hi! I'm your AI tutor for the Physical AI & Humanoid Robotics book. You can:\n\n1. **Ask questions** about the book content\n2. **Select any text** from the book and click the \"Ask AI\" button\n3. **Get instant answers** based on the book's content\n\nHow can I help you today?"}]),l=r[0],d=r[1],h=(0,i.useState)(""),f=h[0],p=h[1],m=(0,i.useState)(""),x=m[0],v=m[1],b=(0,i.useState)(!1),g=b[0],_=b[1],y=(0,i.useState)(function(){return c().apiEndpoint||"http://localhost:3000"}),j=y[0],k=(y[1],(0,i.useRef)(null)),w=(0,i.useRef)(null);(0,i.useEffect)(function(){var e=function(){var e=window.getSelection().toString().trim();e&&v(e)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}},[]),(0,i.useEffect)(function(){var e;null==(e=k.current)||e.scrollIntoView({behavior:"smooth"})},[l]),(0,i.useEffect)(function(){if(x){var e=setTimeout(function(){console.log("Selected text detected:",x.substring(0,50))},100);return function(){return clearTimeout(e)}}},[x]);var T=function(){var e,t=(e=o().m(function e(){var t,n,r,s,i,a,c;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(f.trim()){e.n=1;break}return e.a(2);case 1:return t={id:l.length+1,type:"user",text:f,selectedText:x||null},d(function(e){return[].concat(e,[t])}),p(""),_(!0),e.p=2,n=x?j+"/ask-selected-text":j+"/ask",e.n=3,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:f,selected_text:x||null,top_k:5})});case 3:if((r=e.v).ok){e.n=4;break}throw new Error("API error: "+r.statusText);case 4:return e.n=5,r.json();case 5:s=e.v,i={id:l.length+2,type:"assistant",text:s.answer,sources:s.sources||[]},d(function(e){return[].concat(e,[i])}),v(""),e.n=7;break;case 6:e.p=6,c=e.v,a={id:l.length+2,type:"assistant",text:"Error: "+c.message+". Make sure the API server is running at "+j},d(function(e){return[].concat(e,[a])});case 7:return e.p=7,_(!1),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:a.buttonContainer,children:[(0,u.jsx)("button",{className:a.floatingButton,onClick:function(){return n(!t)},title:"Open AI Tutor","aria-label":"Open AI Tutor",children:(0,u.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,u.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,u.jsx)("path",{d:"M12 1v6m0 6v6M4.22 4.22l4.24 4.24m5.08 5.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m5.08-5.08l4.24-4.24"})]})}),x&&(0,u.jsx)("button",{className:a.selectedTextButton,onClick:function(){x?t||n(!0):alert("Please select text from the book first")},title:'Ask AI about: "'+x.substring(0,30)+'..."',children:"Ask AI"})]}),t&&(0,u.jsxs)("div",{className:a.chatWindow,ref:w,children:[(0,u.jsxs)("div",{className:a.header,children:[(0,u.jsx)("h3",{children:"AI Tutor"}),(0,u.jsx)("p",{children:"Physical AI & Robotics Assistant"}),(0,u.jsx)("button",{className:a.closeButton,onClick:function(){return n(!1)},"aria-label":"Close chat",children:"\u2715"})]}),(0,u.jsxs)("div",{className:a.messagesContainer,children:[l.map(function(e){return(0,u.jsx)("div",{className:a.message+" "+a[e.type],children:(0,u.jsxs)("div",{className:a.messageContent,children:[(0,u.jsx)("div",{className:a.messageText,children:e.text}),e.selectedText&&(0,u.jsxs)("div",{className:a.selectedTextContext,children:[(0,u.jsx)("strong",{children:"Selected text:"}),(0,u.jsxs)("p",{children:['"',e.selectedText.substring(0,100),'..."']})]}),e.sources&&e.sources.length>0&&(0,u.jsxs)("div",{className:a.sources,children:[(0,u.jsx)("strong",{children:"Sources:"}),e.sources.map(function(e,t){return(0,u.jsx)("div",{className:a.source,children:"selected_text"!==e.url&&(0,u.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:new URL(e.url).pathname.split("/").pop()||"View"})},t)})]})]})},e.id)}),g&&(0,u.jsx)("div",{className:a.message+" "+a.assistant,children:(0,u.jsx)("div",{className:a.messageContent,children:(0,u.jsxs)("div",{className:a.loadingSpinner,children:[(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{})]})})}),(0,u.jsx)("div",{ref:k})]}),(0,u.jsxs)("div",{className:a.inputArea,children:[x&&(0,u.jsxs)("div",{className:a.selectedTextIndicator,children:['Selected: "',x.substring(0,40),x.length>40?"...":"",'"']}),(0,u.jsxs)("div",{className:a.inputContainer,children:[(0,u.jsx)("textarea",{value:f,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T())},placeholder:"Ask me anything about the book...",className:a.input,disabled:g,rows:"3"}),(0,u.jsx)("button",{onClick:T,disabled:g||!f.trim(),className:a.sendButton,"aria-label":"Send message",children:g?"...":"\u2192"})]})]})]})]})}}}]);